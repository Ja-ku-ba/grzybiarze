{% extends 'main.html' %}
{% block content %}
<div>
    <h1>Grzybiarze assemble</h1>
    {% if request.user.is_authenticated %}
    <a href="{% url 'add_post' %}">Dodaj post</a>
    {% endif %}
    {% for post in posts %}
    {{post}}
    <image src="{{post.image.url}}" id="responsive"></image>
    <br>
    <div>
        <form method="POST" action="{% url 'like' %}">
            {% csrf_token %}
            <input type="hidden" name='post_id' value='{{post.id}}'>
            {% if request.user not in post.like_post.all %}
                <button type="submit">Like</button>
            {% else %}
                <button type="submit">Unlike</button>
            {% endif %}
        </form>
    </div>
    <div>
        <form method="POST" action="{% url 'dislike' %}">
            {% csrf_token %}
            <input type="hidden" name='post_id' value='{{post.id}}'>
            {% if request.user not in post.dislike_post.all %}
                <button type="submit">Dislike</button>
            {% else %}
                <button type="submit">Undislike</button>
            {% endif %}
        </form>
    </div>

    <strong>{{post.like_post.all.count }} lubi, {{post.dislike_post.all.count }} nie lubi</strong>
    <hr>
    {% endfor %}
</div>
{% endblock content %}
